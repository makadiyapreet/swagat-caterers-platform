{% load static %}
<section class="py-5 bg-dark text-white overflow-hidden" style="position: relative;">
    <div class="container text-center">
        <h2 class="section-title text-gold" data-aos="fade-down">The Royal Menu</h2>
        
        <p class="d-none d-md-block text-white-50 mb-4" style="opacity: 0.7;">Click "Next" to flip pages.</p>
        <p class="d-md-none text-white-50 mb-4" style="opacity: 0.7;">Tap arrows to view next page.</p>

        <div class="book-scene d-none d-md-flex">
            <div id="book" class="book">

                <div id="p1" class="paper" style="z-index: 8;">
                    <div class="front">
                        <div class="front-content cover-design">
                            <img src="{% static 'images/logo/logo.png' %}" style="width: 120px; height: auto; margin-bottom: 20px;">
                            <h1 class="display-4 font-serif text-gold" style="font-size: 5rem;">Swagat</h1>
                            <p class="lead" style="font-size: 1.2rem; font-family: monospace;">Catering Menu 2025</p>
                            <small class="text-white-50 mt-5">Click Next âž”</small>
                        </div>
                    </div>
                    <div class="back">
                        <div class="back-content">
                            <img src="{% static 'images/menu/2.png' %}">
                        </div>
                    </div>
                </div>

                <div id="p2" class="paper" style="z-index: 7;">
                    <div class="front">
                        <div class="front-content">
                            <img src="{% static 'images/menu/3.png' %}">
                        </div>
                    </div>
                    <div class="back">
                        <div class="back-content">
                            <img src="{% static 'images/menu/4.png' %}">
                        </div>
                    </div>
                </div>

                <div id="p3" class="paper" style="z-index: 6;">
                    <div class="front">
                        <div class="front-content">
                            <img src="{% static 'images/menu/5.png' %}">
                        </div>
                    </div>
                    <div class="back">
                        <div class="back-content">
                            <img src="{% static 'images/menu/6.png' %}">
                        </div>
                    </div>
                </div>

                <div id="p4" class="paper" style="z-index: 5;">
                    <div class="front">
                        <div class="front-content">
                            <img src="{% static 'images/menu/7.png' %}">
                        </div>
                    </div>
                    <div class="back">
                        <div class="back-content">
                            <img src="{% static 'images/menu/8.png' %}">
                        </div>
                    </div>
                </div>

                <div id="p5" class="paper" style="z-index: 4;">
                    <div class="front">
                        <div class="front-content">
                            <img src="{% static 'images/menu/9.png' %}">
                        </div>
                    </div>
                    <div class="back">
                        <div class="back-content">
                            <img src="{% static 'images/menu/10.png' %}">
                        </div>
                    </div>
                </div>

                <div id="p6" class="paper" style="z-index: 3;">
                    <div class="front">
                        <div class="front-content">
                            <img src="{% static 'images/menu/11.png' %}">
                        </div>
                    </div>
                    <div class="back">
                        <div class="back-content">
                            <img src="{% static 'images/menu/12.png' %}">
                        </div>
                    </div>
                </div>

                <div id="p7" class="paper" style="z-index: 2;">
                    <div class="front">
                        <div class="front-content">
                            <img src="{% static 'images/menu/13.png' %}">
                        </div>
                    </div>
                    <div class="back">
                        <div class="back-content">
                            <img src="{% static 'images/menu/14.png' %}">
                        </div>
                    </div>
                </div>

                <div id="p8" class="paper" style="z-index: 1;">
                    <div class="front">
                        <div class="front-content">
                            <img src="{% static 'images/menu/15.png' %}">
                        </div>
                    </div>
                    <div class="back">
                        <div class="back-content cover-design">
                            <img src="{% static 'images/logo/logo.png' %}" style="width: 120px; height: auto; margin-bottom: 20px;">
                            <h1 class="text-gold">Swagat Caterers</h1>
                            <p>Ready to order?</p>
                            <a href="{% url 'book_now' %}" class="btn btn-gold btn-sm rounded-pill">
                                Book Now
                            </a>
                            <h3 class="text-gold">Thank You</h3>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="mobile-menu-container" class="d-md-none position-relative mx-auto" style="max-width: 100%; overflow: hidden;">
            
            <div class="mobile-page active-page" data-page="1">
                <div class="cover-design mobile-card">
                    <img src="{% static 'images/logo/logo.png' %}" style="width: 180px; margin-bottom: 15px;">
                    <h1 class="display-5 text-gold font-serif" style="font-size: 5rem;">Swagat</h1>
                    <p class="lead small" style="font-size: 1.2rem; font-family: monospace;">Catering Menu 2025</p>
                </div>
            </div>

            <div class="mobile-page" data-page="2"><img src="{% static 'images/menu/2.png' %}" class="mobile-img"></div>
            <div class="mobile-page" data-page="3"><img src="{% static 'images/menu/3.png' %}" class="mobile-img"></div>
            <div class="mobile-page" data-page="4"><img src="{% static 'images/menu/4.png' %}" class="mobile-img"></div>
            <div class="mobile-page" data-page="5"><img src="{% static 'images/menu/5.png' %}" class="mobile-img"></div>
            <div class="mobile-page" data-page="6"><img src="{% static 'images/menu/6.png' %}" class="mobile-img"></div>
            <div class="mobile-page" data-page="7"><img src="{% static 'images/menu/7.png' %}" class="mobile-img"></div>
            <div class="mobile-page" data-page="8"><img src="{% static 'images/menu/8.png' %}" class="mobile-img"></div>
            <div class="mobile-page" data-page="9"><img src="{% static 'images/menu/9.png' %}" class="mobile-img"></div>
            <div class="mobile-page" data-page="10"><img src="{% static 'images/menu/10.png' %}" class="mobile-img"></div>
            <div class="mobile-page" data-page="11"><img src="{% static 'images/menu/11.png' %}" class="mobile-img"></div>
            <div class="mobile-page" data-page="12"><img src="{% static 'images/menu/12.png' %}" class="mobile-img"></div>
            <div class="mobile-page" data-page="13"><img src="{% static 'images/menu/13.png' %}" class="mobile-img"></div>
            <div class="mobile-page" data-page="14"><img src="{% static 'images/menu/14.png' %}" class="mobile-img"></div>
            <div class="mobile-page" data-page="15"><img src="{% static 'images/menu/15.png' %}" class="mobile-img"></div>

            <div class="mobile-page" data-page="16">
                <div class="cover-design mobile-card">
                    <h3 class="text-gold">Swagat Caterers</h3>
                    <p class="mt-3">Ready to order?</p>
                    <a href="{% url 'contact' %}" class="btn btn-gold btn-sm rounded-pill">
                        Contact Now
                    </a>          
                  </div>
            </div>

        </div>

        <div class="d-flex justify-content-center gap-3 mt-4" style="position: relative; z-index: 100;">
            <button id="prev-btn" class="btn btn-gold rounded-circle" onclick="handlePrev()">
                <i class="bi bi-arrow-left"></i>
            </button>
            <span class="align-self-center text-white-50 d-md-none" id="mobile-page-indicator">1 / 16</span>
            <button id="next-btn" class="btn btn-gold rounded-circle" onclick="handleNext()">
                <i class="bi bi-arrow-right"></i>
            </button>
        </div>

        <div class="mt-4">
            <div class="d-flex justify-content-center gap-2">
                <a href="{% static 'images/menu/Swagat_caterers_Eng.pdf' %}" class="pdf-btn" target="_blank" rel="noopener noreferrer">
                    ðŸ“„ English PDF
                </a>
                <a href="{% static 'images/menu/Swagat_caterers_Guj.pdf' %}" class="pdf-btn" target="_blank" rel="noopener noreferrer">
                    ðŸ“„ Gujarati PDF
                </a>
            </div>
        </div>

    </div>

    <style>
        /* --- DESKTOP 3D BOOK STYLES --- */
        .book-scene {
        display: flex; justify-content: center; align-items: center; perspective: 1500px;
        }
        .book {
        position: relative;
        /* Change these values to match your wide images */
        width: 420px;  /* Was 420px */
        height: 600px; /* Was 600px */
        transform-style: preserve-3d; transition: transform 0.5s;
        }
        .book:img{}
        .paper {
            position: absolute; width: 100%; height: 100%; top: 0; left: 0;
            transform-origin: left; transition: transform 1s; transform-style: preserve-3d;
        }
        .front, .back {
            position: absolute; width: 100%; height: 100%; background: white;
            backface-visibility: hidden; border-radius: 5px; box-shadow: 0 8px 25px rgba(0,0,0,0.35); overflow: hidden;
        }
        .back { transform: rotateY(180deg); }
        .front-content img, .back-content img { width: 100%; height: 100%; object-fit: fill; }
        .cover-design {
            background: #1a1a1a; border: 2px solid #d4af37; display: flex; flex-direction: column;
            justify-content: center; align-items: center; text-align: center; height: 100%;
        }
        .flipped { transform: rotateY(-180deg); }

        /* --- MOBILE SINGLE PAGE STYLES --- */
        .mobile-page {
            display: none; /* Hidden by default */
            width: 100%;
            animation: fadeIn 0.4s ease-in-out;
        }
        .mobile-page.active-page {
            display: block; /* Only show active */
        }
        .mobile-img {
            width: 100%;
            height: auto;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(212,175,55,0.2);
            border: 1px solid #333;
        }
        .mobile-card {
            height: 620px; /* Fixed height for covers */
            border-radius: 8px;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.98); }
            to { opacity: 1; transform: scale(1); }
        }
    
        .menu-pdf-buttons {
        position: absolute;
        right: 20px;
        top: 50%;
        transform: translateY(-50%);
        z-index: 10;
        }

        .pdf-btn {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px 25px;
            color: #d4af37; /* Gold color */
            border: 2px solid #d4af37;
            border-radius: 50px;
            text-decoration: none;
            font-weight: 600;
            background-color: rgba(0,0,0,0.5); /* Semi-transparent black */
            transition: all 0.3s ease;
            white-space: nowrap;
        }

        .pdf-btn:hover {
            background-color: #d4af37;
            color: black;
            transform: translateX(-5px);
        }
    </style>
    </section>